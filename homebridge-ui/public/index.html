<!DOCTYPE html>
<!-- homebridge-ui/public/index.html
     Purpose: Provides the user interface for configuring the plugin -->
<html>
<head>
    <title>SleepMe Simple Configuration</title>
    <style>
        /* Basic styling to make the UI readable */
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            padding: 20px; 
            max-width: 600px; 
            margin: 0 auto; 
        }
        #status {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <h1>SleepMe Simple Configuration</h1>
    
    <!-- Status display area to show connection results -->
    <div id="status">Loading...</div>

    <script>
        // Client-side JavaScript to test UI-Server communication
        console.log('Custom UI JavaScript loading');
        
        // Function to test connection with the server
        async function testConnection() {
            try {
                console.log('Attempting homebridge request');
                
                // Use homebridge.request to communicate with the server
                const result = await homebridge.request('/hello');
                console.log('Request result:', result);
                
                // Update status based on server response
                document.getElementById('status').innerHTML = 
                    result.success 
                    ? `✅ Connection Successful: ${result.message}` 
                    : '❌ Connection Failed';
            } catch (error) {
                // Handle any errors in communication
                console.error('Request failed:', error);
                document.getElementById('status').innerHTML = 
                    `❌ Error: ${error.message}`;
            }
        }

        // Try to test connection when page loads
        if (window.homebridge) {
            testConnection();
        } else {
            console.error('Homebridge object not available');
            document.getElementById('status').innerHTML = 
                '❌ Homebridge API not found';
        }
    </script>
</body>
</html>