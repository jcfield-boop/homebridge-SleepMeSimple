<div class="card">
  <div class="card-header">
    <h3>SleepMe Simple UI</h3>
  </div>
  <div class="card-body">
    <p>Hello World! This is a test of the custom UI.</p>
    <div id="status">Loading...</div>
  </div>
</div>

<script>
  // Wait for DOM to be ready
  document.addEventListener('DOMContentLoaded', async function() {
    const statusDiv = document.getElementById('status');
    
    try {
      // Check if homebridge API is available
      if (typeof window.homebridge !== 'undefined') {
        statusDiv.textContent = 'Connected to Homebridge API';
        
        // Try to get the config
        const config = await window.homebridge.getPluginConfig();
        console.log('Plugin config loaded:', config);
        
        // Add config display
        const configDisplay = document.createElement('div');
        configDisplay.className = 'mt-3';
        configDisplay.innerHTML = `
          <h4>Configuration Loaded:</h4>
          <pre>${JSON.stringify(config, null, 2)}</pre>
        `;
        document.querySelector('.card-body').appendChild(configDisplay);
      } else {
        statusDiv.textContent = 'Homebridge API not available';
      }
    } catch (error) {
      statusDiv.textContent = 'Error: ' + error.message;
      console.error('Custom UI error:', error);
    }
  });
</script>
