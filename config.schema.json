{
  "pluginAlias": "SleepMeSimple",
  "pluginType": "platform",
  "singular": true,
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Platform Name",
        "type": "string",
        "default": "SleepMe Simple",
        "required": true
      },
      "apiToken": {
        "title": "API Token",
        "type": "string",
        "format": "password",
        "description": "Your SleepMe API token (obtain from your account at sleep.me)",
        "required": true
      },
      "unit": {
        "title": "Temperature Unit",
        "type": "string",
        "default": "C",
        "enum": ["C", "F"],
        "enumNames": ["Celsius (째C)", "Fahrenheit (째F)"],
        "description": "Select preferred temperature unit",
        "required": true
      },
      "pollingInterval": {
        "title": "Polling Interval",
        "type": "integer",
        "format": "number",
        "default": 90,
        "description": "How frequently to check device status (in seconds) don't go less than 30"
      },
      "enableSchedules": {
        "title": "Enable Schedules",
        "type": "boolean",
        "default": false,
        "description": "Enable temperature scheduling features"
      },
      "schedulesSection": {
        "title": "Temperature Schedules",
        "type": "object",
        "expandable": true,
        "expanded": false,
        "condition": {
          "functionBody": "return model.enableSchedules === true;"
        },
        "properties": {
          "schedules": {
            "type": "array",
            "title": "Schedule List",
            "description": "Configure scheduled temperature changes",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "title": "Schedule Type",
                  "type": "string",
                  "default": "Everyday",
                  "enum": ["Everyday", "Weekdays", "Weekend", "Specific Day", "Warm Hug"],
                  "description": "When this schedule should be active"
                },
                "day": {
                  "title": "Day",
                  "type": "string",
                  "default": "Monday",
                  "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                  "description": "Day of the week (for Specific Day schedules)",
                  "condition": {
                    "functionBody": "return model.schedulesSection.schedules[arrayIndices[0]].type === 'Specific Day';"
                  }
                },
                "time": {
                  "title": "Time",
                  "type": "string",
                  "format": "time",
                  "default": "21:30",
                  "description": "Time for this scheduled event (HH:MM 24-hour format)"
                },
                "temperature": {
                  "title": "Target Temperature",
                  "type": "number",
                  "description": "Target temperature in your selected unit",
                  "oneOf": [
                    {
                      "title": "Celsius",
                      "type": "number",
                      "default": 21,
                      "minimum": 13,
                      "maximum": 46,
                      "condition": {
                        "functionBody": "return model.unit === 'C';"
                      }
                    },
                    {
                      "title": "Fahrenheit",
                      "type": "number",
                      "default": 70,
                      "minimum": 55,
                      "maximum": 115,
                      "condition": {
                        "functionBody": "return model.unit === 'F';"
                      }
                    }
                  ]
                }
              },
              "required": ["type", "time", "temperature"]
            }
          }
        }
      },
      "warmHugSettings": {
        "title": "Warm Hug Settings",
        "type": "object",
        "expandable": true,
        "expanded": false,
        "description": "Configure the behavior of Warm Hug temperature ramping (gradually increases temperature to create a warming sensation)",
        "properties": {
          "warmHugIncrement": {
            "title": "Temperature Increment per Minute",
            "description": "How quickly the temperature increases during Warm Hug mode",
            "oneOf": [
              {
                "title": "Celsius",
                "type": "number",
                "default": 2,
                "minimum": 0.5,
                "maximum": 5,
                "multipleOf": 0.5,
                "description": "Temperature increase per minute (째C)",
                "condition": {
                  "functionBody": "return model.unit === 'C';"
                }
              },
              {
                "title": "Fahrenheit",
                "type": "number",
                "default": 3.6,
                "minimum": 1,
                "maximum": 9,
                "multipleOf": 1,
                "description": "Temperature increase per minute (째F)",
                "condition": {
                  "functionBody": "return model.unit === 'F';"
                }
              }
            ]
          },
          "warmHugDuration": {
            "title": "Warm Hug Duration",
            "type": "integer",
            "default": 10,
            "minimum": 5,
            "maximum": 30,
            "description": "Duration of Warm Hug temperature ramp (minutes)"
          }
        }
      },
      "advanced": {
        "title": "Advanced Settings",
        "type": "object",
        "expandable": true,
        "expanded": false,
        "properties": {
          "logLevel": {
            "title": "Logging Level",
            "type": "string",
            "default": "normal",
            "enum": ["normal", "debug", "verbose"],
            "enumNames": ["Normal", "Debug", "Verbose"],
            "description": "Controls the detail level of plugin logs"
          }
        }
      }
    },
    "required": ["apiToken", "unit"]
  }
}
